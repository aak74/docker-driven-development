# Переключение между версиями ПО
Предположим, что вам нужно протестировать свой продукт или библиотеку в разных окружениях (с разными версиями ПО). 
Пример. 
1. Вы разработали приложение на Node.js v8 и оно успешно работает.
1. Необходимо проверить работоспособность вашего приложения в окружении Node.js v10.
1. Причем это всего лишь одна из задач и далеко не факт, что вы захотите остаться на новой версии.

Очевидно, что устанавливать, а потом удалять новую версию не имеет смысла.
Что нужно сделать:
1. В структуре вашего проекта сделайте копию папки с описанием контейнера.
1. Измените Dockerfile так, чтобы образ собрался из новой версии Node.js.
1. В `docker-compose.yml` скопируйте описание старого сервиса.
1. В параметре `build` укажите папку с местоположением Dockerfile.
1. Измените имя сервиса.
1. Запустите `docker-compose up --build -d`

Если были указаны внешние порты в сервисе, то один из контейнеров не запустится из-за конфликта портов на хосте.
Чтобы этого избежать мы наружу не должны вытаскивать порты от Node.js.

Что нужно сделать:
1. Удалите у двух рассматриваемых сервисов упоминания портов.
1. Добавьте контейнер с вашим любимым proxy сервером.
1. В описании сервиса укажите два разных внешних порта.
1. В конфиге proxy сервера укажите порты, которые будет слушать proxy сервер. И укажите маршруты до ваших внутренних сервисов.
1. Обращайтесь к одному и тому же приложению по разным портам. 

Например: порт 3008 может соответствовать Node.js v8, а порт 3010 может соответствовать Node.js v10.

По такому же принципу можно использовать ПО, которое еще недоступно в стандартных репозиториях в ветке stable.

