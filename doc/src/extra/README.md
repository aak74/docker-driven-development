# Дополнительные вопросы

## Пользователь в Dockerfile
Если специальным образом не указать пользователя, под которым будут работать процессы в контейнере, то все процессы будут работать из под рута. Это неприемлемо с точки зрения безопасности.

В процессе разработки можно упростить себе жизнь не указывая пользователя, но на проде это совершенно недопустимо. Но даже в процессе разработки я не рекомендую малодушничать. Всегда указывайте пользователя, под которым будут работать процессы в контейнере.

## Документирование
Добавление в проект `Dockerfile` и `docker-compose.yml` описывают серверное окружение в котором проект должен работать. Кроме быстрого развертывания это приносит дополнительную пользу. А именно документирование проекта. Информация о необходимом окружении будет весьма полезна даже если docker в проде не будет использоваться.

## Слоистая структура образов
Каждый образ состоит из нескольких слоев. Слой создает каждая из команд внутри `Dockerfile`. Такой подход обеспечивает переиспользование слоя и экономит место на диске и ускоряет время сборки образа.
При повторной сборке образа учитываются изменения в `Dockerfile` и изменения в файлах, которые участвуют в сборке.
Если изменений в `Dockerfile` не было, то образ _соберется_ очень быстро.
Чем выше в `Dockerfile` были изменения тем больше слоев нужно пересобирать. То есть часто изменяемые настройки следует помещать ближе к концу `Dockerfile`.

## Устаревшие образы продолжают занимать место
В процессе работы с docker может сильно замусориваться файловая система устаревшими образами и устаревшими слоями. Для того, чтобы этого избежать необходимо чистить файловую систему от неиспользуемых образов. Сделать это можно командой:
```
docker system prune
```

Однако это не всегда решает всех проблем, поэтому стоит изучить этот вопрос поподробнее. Или просто купить SSD побольше.

## Использование Docker в Windows и MacOS
Linux лучшая система для разработчика.
Но если вам не повезло и вам приходится жить с Windows или MacOS, то с docker вы тоже сможете работать. Разве что есть некоторые особенности.

@TODO Описать особенности или дать ссылки на материалы.
