(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{62:function(e,l,i){"use strict";i.r(l);var v=i(0),o=Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,l=e.$createElement,i=e._self._c||l;return i("div",{staticClass:"content"},[i("h1",{attrs:{id:"перекnючение-между-версиями-по"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#перекnючение-между-версиями-по","aria-hidden":"true"}},[e._v("#")]),e._v(" Переключение между версиями ПО")]),i("p",[e._v("Предположим, что вам нужно протестировать свой продукт или библиотеку в разных окружениях (с разными версиями ПО).\nПример.")]),i("ol",[i("li",[e._v("Вы разработали приложение на Node.js v8 и оно успешно работает.")]),i("li",[e._v("Необходимо проверить работоспособность вашего приложения в окружении Node.js v10.")]),i("li",[e._v("Причем это всего лишь одна из задач и далеко не факт, что вы захотите остаться на новой версии.")])]),i("p",[e._v("Очевидно, что устанавливать, а потом удалять новую версию не имеет смысла.\nЧто нужно сделать:")]),i("ol",[i("li",[e._v("В структуре вашего проекта сделайте копию папки с описанием контейнера.")]),i("li",[e._v("Измените Dockerfile так, чтобы образ собрался из новой версии Node.js.")]),i("li",[e._v("В "),i("code",[e._v("docker-compose.yml")]),e._v(" скопируйте описание старого сервиса.")]),i("li",[e._v("В параметре "),i("code",[e._v("build")]),e._v(" укажите папку с местоположением Dockerfile.")]),i("li",[e._v("Измените имя сервиса.")]),i("li",[e._v("Запустите "),i("code",[e._v("docker-compose up --build -d")])])]),i("p",[e._v("Если были указаны внешние порты в сервисе, то один из контейнеров не запустится из-за конфликта портов на хосте.\nЧтобы этого избежать мы наружу не должны вытаскивать порты от Node.js.")]),i("p",[e._v("Что нужно сделать:")]),i("ol",[i("li",[e._v("Удалите у двух рассматриваемых сервисов упоминания портов.")]),i("li",[e._v("Добавьте контейнер с вашим любимым proxy сервером.")]),i("li",[e._v("В описании сервиса укажите два разных внешних порта.")]),i("li",[e._v("В конфиге proxy сервера укажите порты, которые будет слушать proxy сервер. И укажите маршруты до ваших внутренних сервисов.")]),i("li",[e._v("Обращайтесь к одному и тому же приложению по разным портам.")])]),i("p",[e._v("Например: порт 3008 может соответствовать Node.js v8, а порт 3010 может соответствовать Node.js v10.")]),i("p",[e._v("По такому же принципу можно использовать ПО, которое еще недоступно в стандартных репозиториях в ветке stable.")])])}],!1,null,null,null);l.default=o.exports}}]);