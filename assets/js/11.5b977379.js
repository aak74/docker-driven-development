(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{176:function(v,_,e){"use strict";e.r(_);var l=e(0),i=Object(l.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"перекnючение-между-версиями-по"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#перекnючение-между-версиями-по","aria-hidden":"true"}},[v._v("#")]),v._v(" Переключение между версиями ПО")]),v._v(" "),e("p",[v._v("Предположим, что вам нужно протестировать свой продукт или библиотеку в разных окружениях (с разными версиями ПО).\nПример.")]),v._v(" "),e("ol",[e("li",[v._v("Вы разработали приложение на Node.js v8 и оно успешно работает.")]),v._v(" "),e("li",[v._v("Необходимо проверить работоспособность вашего приложения в окружении Node.js v10.")]),v._v(" "),e("li",[v._v("Причем это всего лишь одна из задач и далеко не факт, что вы захотите остаться на новой версии.")])]),v._v(" "),e("p",[v._v("Очевидно, что устанавливать, а потом удалять новую версию не имеет смысла.\nЧто нужно сделать:")]),v._v(" "),e("ol",[e("li",[v._v("В структуре вашего проекта сделайте копию папки с описанием контейнера.")]),v._v(" "),e("li",[v._v("Измените Dockerfile так, чтобы образ собрался из новой версии Node.js.")]),v._v(" "),e("li",[v._v("В "),e("code",[v._v("docker-compose.yml")]),v._v(" скопируйте описание старого сервиса.")]),v._v(" "),e("li",[v._v("В параметре "),e("code",[v._v("build")]),v._v(" укажите папку с местоположением Dockerfile.")]),v._v(" "),e("li",[v._v("Измените имя сервиса.")]),v._v(" "),e("li",[v._v("Запустите "),e("code",[v._v("docker-compose up --build -d")])])]),v._v(" "),e("p",[v._v("Если были указаны внешние порты в сервисе, то один из контейнеров не запустится из-за конфликта портов на хосте.\nЧтобы этого избежать мы наружу не должны вытаскивать порты от Node.js.")]),v._v(" "),e("p",[v._v("Что нужно сделать:")]),v._v(" "),e("ol",[e("li",[v._v("Удалите у двух рассматриваемых сервисов упоминания портов.")]),v._v(" "),e("li",[v._v("Добавьте контейнер с вашим любимым proxy сервером.")]),v._v(" "),e("li",[v._v("В описании сервиса укажите два разных внешних порта.")]),v._v(" "),e("li",[v._v("В конфиге proxy сервера укажите порты, которые будет слушать proxy сервер. И укажите маршруты до ваших внутренних сервисов.")]),v._v(" "),e("li",[v._v("Обращайтесь к одному и тому же приложению по разным портам.")])]),v._v(" "),e("p",[v._v("Например: порт 3008 может соответствовать Node.js v8, а порт 3010 может соответствовать Node.js v10.")]),v._v(" "),e("p",[v._v("По такому же принципу можно использовать ПО, которое еще недоступно в стандартных репозиториях в ветке stable.")])])}],!1,null,null,null);i.options.__file="README.md";_.default=i.exports}}]);